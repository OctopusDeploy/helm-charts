# Default values for kubernetes-agent.

nameOverride: ""
imagePullSecrets: []

agent:
  acceptEula: "N"
  targetName: ""
  serverCommsAddress: ""
  bearerToken: ""
  serverApiKey: ""
  serverUrl: ""
  space: "Default"
  targetEnvironments: []
  targetRoles: []
  logLevel: "Info"
  defaultNamespace: ""
  pollingConnectionCount: 5

  image:
    repository: octopusdeploy/kubernetes-tentacle
    pullPolicy: IfNotPresent
    # Overrides the image tag whose default is the chart appVersion.
    tag: "8.1.1478"
   
  serviceAccount:
    # The name of the service account to use.
    # If not set a name is generated using the fullname template
    name: ""
    # Annotations to add to the service account
    annotations: {}
  
  metadata:
    annotations: {}
    labels: {}

  resources: 
    requests:
      memory: "150Mi"
      cpu: "100m"

  debug:
    disableAutoPodCleanup: false

scriptPods:
  disruptionBudgetEnabled: true

  serviceAccount:
    # The name of the service account used for executing script pods
    name: ""
    # Annotations to add to the service account
    annotations: {}

    # Specifies that the pod service account should be constrained to target namespaces
    # An empty array indicates a cluster role binding (Default)
    targetNamespaces: []

    #if defined, overrides the default cluster role rules
    clusterRole:
      rules: []

persistence:
  # if provided, will disable the NFS pod
  storageClassName: ""

  size: 10Gi

  nfs:    
    image:
      repository: octopusdeploy/nfs-server
      pullPolicy: IfNotPresent
      tag: "1.0.1"

    metadata:
      annotations: {}
      labels: {}

    watchdog:
      enabled: true
      loop_seconds: ""
      initial_backoff_seconds: ""
      timeout_seconds: ""
      image:
        repository: octopusdeploy/kubernetes-agent-nfs-watchdog
        pullPolicy: IfNotPresent
        tag: "0.0.2"

# Used for integration testing to avoid registring with a real Octopus Server
testing:
  tentacle:
    configMap:
      data: {}